<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ë„ì„œ ê²€ìƒ‰</title>
<link rel="stylesheet" href="/css/book.css">
<script src="/js/httpRequest.js"></script>

<script>
function m_send(f) {
   let url = "list.do";
   let param = "search_txt=" + f.search_txt.value;
   sendRequest(url, param, resultFn, "get");
}

function resultFn() {
   if (xhr.readyState == 4 && xhr.status == 200) {
      let data = xhr.responseText;
      let json = eval(data);

      let resTable = document.getElementById("resTable");
      resTable.innerHTML = ""; // ì´ˆê¸°í™”

      json[0].items.forEach(item => {
         let card = document.createElement("div");
         card.className = "book-card"; // ì¹´ë“œ ìŠ¤íƒ€ì¼ ì ìš©

         card.innerHTML = `
            <img src="${item.image}" alt="book cover">
            <div class="book-info">
              <h3>${item.title}</h3>
              <p>ì €ì: ${item.author}</p>
              <p class="price">${item.discount}ì›</p>
            </div>
         `;
         resTable.appendChild(card);
      });
   }
}
</script>
</head>

<body>
   <h1>ğŸ“š ë„ì„œ ê²€ìƒ‰</h1>

   <div class="search-box">
      <input type="text" name="search_txt" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
      <input type="button" value="ê²€ìƒ‰" onclick="m_send(this.form)">
   </div>

   <!-- ğŸ“Œ table ëŒ€ì‹  div ì»¨í…Œì´ë„ˆ -->
   <div id="resTable"></div>

</body>
</html>
